"use strict";
// Copyright Amazon.com Inc. or its affiliates. All Rights Reserved.
// SPDX-License-Identifier: Apache-2.0
Object.defineProperty(exports, "__esModule", { value: true });
exports.buildDecrypt = void 0;
const decrypt_1 = require("./decrypt");
const material_management_browser_1 = require("@aws-crypto/material-management-browser");
function buildDecrypt(options = {}) {
    const { commitmentPolicy = material_management_browser_1.CommitmentPolicy.REQUIRE_ENCRYPT_REQUIRE_DECRYPT, maxEncryptedDataKeys = false, } = typeof options === 'string' ? { commitmentPolicy: options } : options;
    /* Precondition: browser buildDecrypt needs a valid commitmentPolicy. */
    (0, material_management_browser_1.needs)(material_management_browser_1.CommitmentPolicy[commitmentPolicy], 'Invalid commitment policy.');
    /* Precondition: browser buildDecrypt needs a valid maxEncryptedDataKeys. */
    (0, material_management_browser_1.needs)(maxEncryptedDataKeys === false || maxEncryptedDataKeys >= 1, 'Invalid maxEncryptedDataKeys value.');
    const clientOptions = {
        commitmentPolicy,
        maxEncryptedDataKeys,
    };
    return {
        decrypt: decrypt_1._decrypt.bind({}, clientOptions),
    };
}
exports.buildDecrypt = buildDecrypt;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVjcnlwdF9jbGllbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvZGVjcnlwdF9jbGllbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLG9FQUFvRTtBQUNwRSxzQ0FBc0M7OztBQUV0Qyx1Q0FBb0M7QUFDcEMseUZBSWdEO0FBU2hELFNBQWdCLFlBQVksQ0FDMUIsVUFBcUQsRUFBRTtJQUl2RCxNQUFNLEVBQ0osZ0JBQWdCLEdBQUcsOENBQWdCLENBQUMsK0JBQStCLEVBQ25FLG9CQUFvQixHQUFHLEtBQUssR0FDN0IsR0FBRyxPQUFPLE9BQU8sS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUUsZ0JBQWdCLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQTtJQUV6RSx3RUFBd0U7SUFDeEUsSUFBQSxtQ0FBSyxFQUFDLDhDQUFnQixDQUFDLGdCQUFnQixDQUFDLEVBQUUsNEJBQTRCLENBQUMsQ0FBQTtJQUN2RSw0RUFBNEU7SUFDNUUsSUFBQSxtQ0FBSyxFQUNILG9CQUFvQixLQUFLLEtBQUssSUFBSSxvQkFBb0IsSUFBSSxDQUFDLEVBQzNELHFDQUFxQyxDQUN0QyxDQUFBO0lBRUQsTUFBTSxhQUFhLEdBQWtCO1FBQ25DLGdCQUFnQjtRQUNoQixvQkFBb0I7S0FDckIsQ0FBQTtJQUNELE9BQU87UUFDTCxPQUFPLEVBQUUsa0JBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLGFBQWEsQ0FBQztLQUMxQyxDQUFBO0FBQ0gsQ0FBQztBQXpCRCxvQ0F5QkMifQ==